<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <style>
            .candlestick.bull {
                fill: #26a69a;
                stroke: #26a69a;
            }
            .candlestick.bear {
                fill: #ef5350;
                stroke: #ef5350;
            }
            .wick {
                stroke-width: 1;
            }
            .grid-line {
                stroke: #e0e0e0;
                stroke-dasharray: 2, 2;
            }
            .pattern-line {
                stroke: #007bff;
                stroke-width: 2;
                stroke-dasharray: 4, 4;
                fill: none;
            }
            .phase-line {
                stroke: #9c27b0;
                stroke-width: 2;
                stroke-dasharray: 6, 3;
                fill: none;
            }
            .support-line {
                stroke: #4caf50;
                stroke-width: 2;
                stroke-dasharray: 4, 4;
                fill: none;
            }
            .label-text {
                font-family: 'Arial', 'SimHei', sans-serif;
                font-size: 14px;
                fill: #333;
                font-weight: bold;
            }
            .title-text {
                font-family: 'Arial', 'SimHei', sans-serif;
                font-size: 24px;
                font-weight: bold;
                fill: #2c3e50;
                text-anchor: middle;
            }
            .arrow-line {
                stroke: #2c3e50;
                stroke-width: 1.5;
            }
            .arrow-head {
                fill: #2c3e50;
            }
            .highlight-zone-1 {
                fill: rgba(156, 39, 176, 0.08);
                stroke: none;
            }
            .highlight-zone-2 {
                fill: rgba(76, 175, 80, 0.08);
                stroke: none;
            }
            .breakout-arrow {
                stroke: #26a69a;
                stroke-width: 2;
            }
            .breakout-arrow-head {
                fill: #26a69a;
            }
        </style>
    </defs>
    
    <!-- Title -->
    <text x="400" y="40" class="title-text">两段式整理</text>

    <!-- Grid Lines -->
    <g class="grid">
        <line x1="50" y1="100" x2="750" y2="100" class="grid-line"></line>
        <line x1="50" y1="200" x2="750" y2="200" class="grid-line"></line>
        <line x1="50" y1="300" x2="750" y2="300" class="grid-line"></line>
        <line x1="50" y1="400" x2="750" y2="400" class="grid-line"></line>
    </g>

    <!-- Candlesticks -->
    <g id="candlesticks">
        <!-- Initial Trend -->
        <line x1="80" y1="420" x2="80" y2="380" class="wick candlestick bull"></line>
        <rect x="75" y="380" width="10" height="30" class="candlestick bull"></rect>

        <line x1="110" y1="390" x2="110" y2="340" class="wick candlestick bull"></line>
        <rect x="105" y="340" width="10" height="40" class="candlestick bull"></rect>

        <!-- Phase 1 Consolidation -->
        <line x1="140" y1="360" x2="140" y2="320" class="wick candlestick bear"></line>
        <rect x="135" y="330" width="10" height="30" class="candlestick bear"></rect>

        <line x1="170" y1="350" x2="170" y2="310" class="wick candlestick bull"></line>
        <rect x="165" y="315" width="10" height="30" class="candlestick bull"></rect>

        <line x1="200" y1="340" x2="200" y2="305" class="wick candlestick bear"></line>
        <rect x="195" y="315" width="10" height="25" class="candlestick bear"></rect>

        <line x1="230" y1="335" x2="230" y2="300" class="wick candlestick bull"></line>
        <rect x="225" y="305" width="10" height="28" class="candlestick bull"></rect>

        <line x1="260" y1="325" x2="260" y2="295" class="wick candlestick bear"></line>
        <rect x="255" y="305" width="10" height="20" class="candlestick bear"></rect>

        <!-- Transition between phases -->
        <line x1="290" y1="320" x2="290" y2="285" class="wick candlestick bull"></line>
        <rect x="285" y="290" width="10" height="25" class="candlestick bull"></rect>

        <!-- Phase 2 Consolidation (tighter range) -->
        <line x1="320" y1="305" x2="320" y2="275" class="wick candlestick bear"></line>
        <rect x="315" y="280" width="10" height="20" class="candlestick bear"></rect>

        <line x1="350" y1="295" x2="350" y2="270" class="wick candlestick bull"></line>
        <rect x="345" y="275" width="10" height="15" class="candlestick bull"></rect>

        <line x1="380" y1="290" x2="380" y2="268" class="wick candlestick bear"></line>
        <rect x="375" y="273" width="10" height="15" class="candlestick bear"></rect>

        <line x1="410" y1="285" x2="410" y2="265" class="wick candlestick bull"></line>
        <rect x="405" y="270" width="10" height="12" class="candlestick bull"></rect>

        <line x1="440" y1="282" x2="440" y2="262" class="wick candlestick bear"></line>
        <rect x="435" y="267" width="10" height="13" class="candlestick bear"></rect>

        <line x1="470" y1="278" x2="470" y2="258" class="wick candlestick bull"></line>
        <rect x="465" y="263" width="10" height="12" class="candlestick bull"></rect>

        <!-- Breakout -->
        <line x1="500" y1="270" x2="500" y2="200" class="wick candlestick bull"></line>
        <rect x="495" y="210" width="10" height="50" class="candlestick bull"></rect>

        <!-- Continuation -->
        <line x1="530" y1="220" x2="530" y2="180" class="wick candlestick bull"></line>
        <rect x="525" y="185" width="10" height="30" class="candlestick bull"></rect>

        <line x1="560" y1="200" x2="560" y2="150" class="wick candlestick bull"></line>
        <rect x="555" y="155" width="10" height="35" class="candlestick bull"></rect>
    </g>

    <!-- Pattern Areas and Lines -->
    <!-- Phase 1 Consolidation Area -->
    <rect x="130" y="295" width="140" height="65" class="highlight-zone-1" />
    <line x1="140" y1="300" x2="260" y2="295" class="phase-line" />
    <line x1="140" y1="360" x2="260" y2="325" class="phase-line" />

    <!-- Phase 2 Consolidation Area -->
    <rect x="310" y="255" width="170" height="50" class="highlight-zone-2" />
    <line x1="320" y1="260" x2="470" y2="258" class="support-line" />
    <line x1="320" y1="305" x2="470" y2="282" class="support-line" />

    <!-- Labels -->
    <text x="140" y="280" class="label-text">阶段一：宽幅整理</text>
    <text x="320" y="240" class="label-text">阶段二：窄幅整理</text>

    <!-- Phase indicators -->
    <line x1="200" y1="400" x2="200" y2="380" class="arrow-line"></line>
    <polygon points="195,380 200,370 205,380" class="arrow-head" />
    <text x="180" y="420" class="label-text">1. 初始整理</text>

    <line x1="390" y1="350" x2="390" y2="320" class="arrow-line"></line>
    <polygon points="385,320 390,310 395,320" class="arrow-head" />
    <text x="350" y="370" class="label-text">2. 收敛整理</text>

    <!-- Breakout indication -->
    <circle cx="500" cy="230" r="15" fill="none" stroke="#26a69a" stroke-width="2" />
    <line x1="515" y1="230" x2="580" y2="230" class="breakout-arrow"></line>
    <polygon points="580,225 590,230 580,235" class="breakout-arrow-head" />
    <text x="595" y="235" class="label-text">3. 向上突破</text>

    <!-- Pattern characteristics -->
    <text x="50" y="470" class="label-text" style="font-size: 12px; fill: #666;">特征: 先宽后窄的两阶段整理，波动幅度逐渐收敛</text>

    <!-- Predicted Price Movement -->
    <line x1="560" y1="170" x2="700" y2="100" stroke="#00c851" stroke-width="3" stroke-dasharray="8,4" opacity="0.8" />
    <text x="650" y="90" class="label-text" style="font-size: 12px; fill: #00c851;">预测走势</text>

    <!-- Stop Loss Zone (Shadow) -->
    <rect x="500" y="320" width="250" height="180" fill="rgba(255, 68, 68, 0.15)" stroke="none" />
    <line x1="490" y1="320" x2="750" y2="320" stroke="#ff4444" stroke-width="2" stroke-dasharray="6,3" />
    <text x="650" y="315" class="label-text" style="font-size: 12px; fill: #ff4444;">止损区域</text>
    <text x="650" y="330" class="label-text" style="font-size: 10px; fill: #666;">整理区间下轨</text>

    <!-- Take Profit Zones (Shadows) -->
    <rect x="500" y="80" width="250" height="40" fill="rgba(76, 175, 80, 0.12)" stroke="none" />
    <line x1="600" y1="120" x2="750" y2="120" stroke="#4caf50" stroke-width="2" stroke-dasharray="6,3" />
    <text x="650" y="115" class="label-text" style="font-size: 12px; fill: #4caf50;">止盈区域1</text>
    <text x="650" y="130" class="label-text" style="font-size: 10px; fill: #666;">整理高度1:1</text>

    <rect x="500" y="60" width="250" height="60" fill="rgba(46, 125, 50, 0.18)" stroke="none" />
    <line x1="650" y1="80" x2="750" y2="80" stroke="#2e7d32" stroke-width="2" stroke-dasharray="6,3" />
    <text x="680" y="75" class="label-text" style="font-size: 12px; fill: #2e7d32;">止盈区域2</text>
    <text x="680" y="90" class="label-text" style="font-size: 10px; fill: #666;">整理高度1.5:1</text>

    <!-- Optimal Entry Point -->
    <circle cx="500" cy="225" r="8" fill="#ffc107" stroke="#ff8f00" stroke-width="3" />
    <circle cx="500" cy="225" r="12" fill="none" stroke="#ffc107" stroke-width="2" stroke-dasharray="3,2" />
    <text x="515" y="215" class="label-text" style="font-size: 12px; fill: #ff8f00;">最佳买入点</text>
    <text x="515" y="230" class="label-text" style="font-size: 10px; fill: #666;">突破确认后</text>

    <!-- Volume indication (conceptual) -->
    <text x="500" y="400" class="label-text" style="font-size: 12px; fill: #666;">交易量特征:</text>
    <text x="500" y="420" class="label-text" style="font-size: 11px; fill: #666;">• 阶段一：成交活跃</text>
    <text x="500" y="435" class="label-text" style="font-size: 11px; fill: #666;">• 阶段二：成交萎缩</text>
    <text x="500" y="450" class="label-text" style="font-size: 11px; fill: #666;">• 突破：放量确认</text>

    <!-- Risk/Reward Analysis -->
    <text x="50" y="400" class="label-text" style="font-size: 12px; fill: #666;">风险收益分析:</text>
    <text x="50" y="420" class="label-text" style="font-size: 11px; fill: #666;">• 风险: 突破点到止损位</text>
    <text x="50" y="435" class="label-text" style="font-size: 11px; fill: #666;">• 收益: 突破点到止盈位</text>
    <text x="50" y="450" class="label-text" style="font-size: 11px; fill: #666;">• 推荐风险收益比: 1:2</text>
</svg>
