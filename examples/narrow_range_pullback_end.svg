<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <style>
            .candlestick.bull {
                fill: #26a69a;
                stroke: #26a69a;
            }
            .candlestick.bear {
                fill: #ef5350;
                stroke: #ef5350;
            }
            .wick {
                stroke-width: 1;
            }
            .grid-line {
                stroke: #e0e0e0;
                stroke-dasharray: 2, 2;
            }
            .trend-line {
                stroke: #ff9800;
                stroke-width: 3;
                fill: none;
            }
            .pullback-line {
                stroke: #9c27b0;
                stroke-width: 2;
                stroke-dasharray: 4, 4;
                fill: none;
            }
            .narrow-range-line {
                stroke: #f44336;
                stroke-width: 2;
                stroke-dasharray: 2, 6;
                fill: none;
            }
            .support-line {
                stroke: #4caf50;
                stroke-width: 2;
                stroke-dasharray: 6, 3;
                fill: none;
            }
            .label-text {
                font-family: 'Arial', 'SimHei', sans-serif;
                font-size: 14px;
                fill: #333;
                font-weight: bold;
            }
            .title-text {
                font-family: 'Arial', 'SimHei', sans-serif;
                font-size: 24px;
                font-weight: bold;
                fill: #2c3e50;
                text-anchor: middle;
            }
            .arrow-line {
                stroke: #2c3e50;
                stroke-width: 1.5;
            }
            .arrow-head {
                fill: #2c3e50;
            }
            .narrow-zone {
                fill: rgba(244, 67, 54, 0.08);
                stroke: none;
            }
            .pullback-zone {
                fill: rgba(156, 39, 176, 0.05);
                stroke: none;
            }
            .resumption-arrow {
                stroke: #26a69a;
                stroke-width: 3;
            }
            .resumption-arrow-head {
                fill: #26a69a;
            }
        </style>
    </defs>
    
    <!-- Title -->
    <text x="400" y="40" class="title-text">回调形态末期的窄幅交易区间</text>

    <!-- Grid Lines -->
    <g class="grid">
        <line x1="50" y1="100" x2="750" y2="100" class="grid-line"></line>
        <line x1="50" y1="200" x2="750" y2="200" class="grid-line"></line>
        <line x1="50" y1="300" x2="750" y2="300" class="grid-line"></line>
        <line x1="50" y1="400" x2="750" y2="400" class="grid-line"></line>
    </g>

    <!-- Candlesticks -->
    <g id="candlesticks">
        <!-- Initial Uptrend -->
        <line x1="80" y1="420" x2="80" y2="380" class="wick candlestick bull"></line>
        <rect x="75" y="380" width="10" height="30" class="candlestick bull"></rect>

        <line x1="110" y1="390" x2="110" y2="340" class="wick candlestick bull"></line>
        <rect x="105" y="345" width="10" height="40" class="candlestick bull"></rect>

        <line x1="140" y1="360" x2="140" y2="290" class="wick candlestick bull"></line>
        <rect x="135" y="295" width="10" height="55" class="candlestick bull"></rect>

        <line x1="170" y1="310" x2="170" y2="250" class="wick candlestick bull"></line>
        <rect x="165" y="255" width="10" height="50" class="candlestick bull"></rect>

        <!-- Start of Pullback -->
        <line x1="200" y1="280" x2="200" y2="320" class="wick candlestick bear"></line>
        <rect x="195" y="280" width="10" height="35" class="candlestick bear"></rect>

        <line x1="230" y1="330" x2="230" y2="360" class="wick candlestick bear"></line>
        <rect x="225" y="330" width="10" height="25" class="candlestick bear"></rect>

        <line x1="260" y1="350" x2="260" y2="380" class="wick candlestick bear"></line>
        <rect x="255" y="355" width="10" height="25" class="candlestick bear"></rect>

        <!-- Pullback continues -->
        <line x1="290" y1="370" x2="290" y2="340" class="wick candlestick bull"></line>
        <rect x="285" y="345" width="10" height="20" class="candlestick bull"></rect>

        <line x1="320" y1="360" x2="320" y2="385" class="wick candlestick bear"></line>
        <rect x="315" y="365" width="10" height="20" class="candlestick bear"></rect>

        <line x1="350" y1="380" x2="350" y2="350" class="wick candlestick bull"></line>
        <rect x="345" y="355" width="10" height="20" class="candlestick bull"></rect>

        <!-- Narrow Range Phase (形态末期) -->
        <line x1="380" y1="375" x2="380" y2="360" class="wick candlestick bear"></line>
        <rect x="375" y="365" width="10" height="8" class="candlestick bear"></rect>

        <line x1="410" y1="372" x2="410" y2="358" class="wick candlestick bull"></line>
        <rect x="405" y="362" width="10" height="7" class="candlestick bull"></rect>

        <line x1="440" y1="370" x2="440" y2="356" class="wick candlestick bear"></line>
        <rect x="435" y="360" width="10" height="8" class="candlestick bear"></rect>

        <line x1="470" y1="368" x2="470" y2="354" class="wick candlestick bull"></line>
        <rect x="465" y="358" width="10" height="6" class="candlestick bull"></rect>

        <line x1="500" y1="366" x2="500" y2="352" class="wick candlestick bear"></line>
        <rect x="495" y="356" width="10" height="7" class="candlestick bear"></rect>

        <line x1="530" y1="364" x2="530" y2="350" class="wick candlestick bull"></line>
        <rect x="525" y="354" width="10" height="6" class="candlestick bull"></rect>

        <!-- Trend Resumption -->
        <line x1="560" y1="358" x2="560" y2="300" class="wick candlestick bull"></line>
        <rect x="555" y="310" width="10" height="45" class="candlestick bull"></rect>

        <line x1="590" y1="320" x2="590" y2="250" class="wick candlestick bull"></line>
        <rect x="585" y="260" width="10" height="55" class="candlestick bull"></rect>

        <line x1="620" y1="270" x2="620" y2="200" class="wick candlestick bull"></line>
        <rect x="615" y="210" width="10" height="55" class="candlestick bull"></rect>
    </g>

    <!-- Pattern Areas and Lines -->
    
    <!-- Main Trend Line -->
    <line x1="80" y1="400" x2="170" y2="270" class="trend-line" />

    <!-- Pullback Zone -->
    <rect x="190" y="250" width="170" height="150" class="pullback-zone" />
    <line x1="200" y1="280" x2="350" y2="380" class="pullback-line" />

    <!-- Narrow Range Zone -->
    <rect x="370" y="345" width="170" height="30" class="narrow-zone" />
    <line x1="380" y1="375" x2="530" y2="364" class="narrow-range-line" />
    <line x1="380" y1="350" x2="530" y2="350" class="narrow-range-line" />

    <!-- Support Level -->
    <line x1="200" y1="385" x2="560" y2="360" class="support-line" />

    <!-- Labels and Annotations -->
    <text x="80" y="430" class="label-text">1. 上升趋势</text>
    
    <text x="200" y="240" class="label-text">2. 回调整理</text>
    
    <text x="380" y="335" class="label-text">3. 窄幅区间</text>
    <text x="385" y="320" class="label-text" style="font-size: 11px; fill: #666;">(波动收敛)</text>

    <!-- Narrow range characteristics -->
    <line x1="450" y1="400" x2="450" y2="385" class="arrow-line"></line>
    <polygon points="445,385 450,375 455,385" class="arrow-head" />
    <text x="400" y="420" class="label-text" style="font-size: 12px;">能量蓄积阶段</text>

    <!-- Breakout indication -->
    <circle cx="560" cy="330" r="18" fill="none" stroke="#26a69a" stroke-width="2" />
    <line x1="578" y1="330" x2="640" y2="330" class="resumption-arrow"></line>
    <polygon points="640,325 650,330 640,335" class="resumption-arrow-head" />
    <text x="655" y="335" class="label-text">4. 趋势恢复</text>

    <!-- Pattern characteristics -->
    <text x="50" y="470" class="label-text" style="font-size: 12px; fill: #666;">特征: 回调末期出现窄幅震荡，通常为趋势恢复的前兆</text>

    <!-- Technical notes -->
    <text x="600" y="100" class="label-text" style="font-size: 12px; fill: #666;">技术要点:</text>
    <text x="600" y="120" class="label-text" style="font-size: 11px; fill: #666;">• 波动幅度缩小</text>
    <text x="600" y="135" class="label-text" style="font-size: 11px; fill: #666;">• 成交量萎缩</text>
    <text x="600" y="150" class="label-text" style="font-size: 11px; fill: #666;">• 支撑位稳固</text>
    <text x="600" y="165" class="label-text" style="font-size: 11px; fill: #666;">• 向上突破确认</text>

    <!-- Predicted Price Movement -->
    <line x1="620" y1="235" x2="750" y2="150" stroke="#00c851" stroke-width="3" stroke-dasharray="8,4" opacity="0.8" />
    <text x="700" y="140" class="label-text" style="font-size: 12px; fill: #00c851;">预测走势</text>

    <!-- Stop Loss Zone (Shadow) -->
    <rect x="560" y="390" width="190" height="110" fill="rgba(255, 68, 68, 0.15)" stroke="none" />
    <line x1="550" y1="390" x2="750" y2="390" stroke="#ff4444" stroke-width="2" stroke-dasharray="6,3" />
    <text x="640" y="385" class="label-text" style="font-size: 12px; fill: #ff4444;">止损区域</text>
    <text x="640" y="400" class="label-text" style="font-size: 10px; fill: #666;">窄幅区间下轨</text>

    <!-- Take Profit Zones (Shadows) -->
    <rect x="560" y="140" width="190" height="40" fill="rgba(76, 175, 80, 0.12)" stroke="none" />
    <line x1="680" y1="180" x2="750" y2="180" stroke="#4caf50" stroke-width="2" stroke-dasharray="6,3" />
    <text x="700" y="175" class="label-text" style="font-size: 12px; fill: #4caf50;">止盈区域1</text>
    <text x="700" y="190" class="label-text" style="font-size: 10px; fill: #666;">回调幅度1:1</text>

    <rect x="560" y="120" width="190" height="60" fill="rgba(46, 125, 50, 0.18)" stroke="none" />
    <line x1="700" y1="140" x2="750" y2="140" stroke="#2e7d32" stroke-width="2" stroke-dasharray="6,3" />
    <text x="710" y="135" class="label-text" style="font-size: 12px; fill: #2e7d32;">止盈区域2</text>
    <text x="710" y="150" class="label-text" style="font-size: 10px; fill: #666;">回调幅度1.5:1</text>

    <!-- Optimal Entry Point -->
    <circle cx="560" cy="340" r="8" fill="#ffc107" stroke="#ff8f00" stroke-width="3" />
    <circle cx="560" cy="340" r="12" fill="none" stroke="#ffc107" stroke-width="2" stroke-dasharray="3,2" />
    <text x="575" y="330" class="label-text" style="font-size: 12px; fill: #ff8f00;">最佳买入点</text>
    <text x="575" y="345" class="label-text" style="font-size: 10px; fill: #666;">突破确认后</text>

    <!-- Price action context -->
    <text x="50" y="90" class="label-text" style="font-size: 12px; fill: #666;">市场心理: 多空力量平衡 → 买盘重新进场 → 趋势恢复</text>

    <!-- Risk/Reward Analysis -->
    <text x="250" y="450" class="label-text" style="font-size: 12px; fill: #666;">风险收益分析:</text>
    <text x="250" y="470" class="label-text" style="font-size: 11px; fill: #666;">• 风险: 突破点到止损位 • 收益: 突破点到止盈位 • 推荐风险收益比: 1:2</text>
</svg>
